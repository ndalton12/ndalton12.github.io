<!DOCTYPE html><html lang="en" class="dark" data-astro-cid-37fxchfa> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Do LLMs actually know how to think about arithmetic?"><meta name="generator" content="Astro v5.16.9"><link rel="icon" type="image/png" href="/icon.png"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet"><title>Replicating &quot;The Illusion of Thinking&quot; Paper with Simple Arithmetic | Niall Dalton</title><meta property="og:title" content="Replicating &#34;The Illusion of Thinking&#34; Paper with Simple Arithmetic | Niall Dalton"><meta property="og:description" content="Do LLMs actually know how to think about arithmetic?"><meta property="og:type" content="website"><meta property="og:url" content="https://ndalton12.github.io/blog/llm-arithmetic/"><!-- Prevent flash of wrong theme --><script>
      const theme = localStorage.getItem('theme') || 'dark';
      if (theme === 'light') {
        document.documentElement.classList.remove('dark');
      }
    </script><link rel="stylesheet" href="/_astro/_slug_.DXTyhdpv.css"></head> <body class="min-h-screen overflow-x-hidden bg-[#f8f9fa] text-gray-900 transition-colors duration-300 dark:bg-[#06060a] dark:text-gray-100" data-astro-cid-37fxchfa> <!-- Background --> <div class="fixed inset-0 -z-10 overflow-hidden" data-astro-cid-37fxchfa> <!-- Dot grid --> <div class="dot-grid" data-astro-cid-37fxchfa></div> <!-- Lower perspective grid --> <canvas id="grid-canvas" data-astro-cid-37fxchfa></canvas> <!-- Animated glow orbs --> <div class="glow glow-1" data-astro-cid-37fxchfa></div> <div class="glow glow-2" data-astro-cid-37fxchfa></div> <!-- Top radial glow --> <div class="absolute inset-0 bg-[radial-gradient(ellipse_60%_40%_at_50%_0%,rgba(99,102,241,0.08))] dark:bg-[radial-gradient(ellipse_60%_40%_at_50%_0%,rgba(120,119,198,0.12))]" data-astro-cid-37fxchfa></div> </div> <main class="relative" data-astro-cid-37fxchfa> <div class="mx-auto max-w-5xl px-6 py-12 sm:px-8 lg:px-12" data-astro-cid-37fxchfa>  <header class="mb-16 pt-8"> <div class="flex flex-col gap-8 md:flex-row md:items-start md:gap-12"> <!-- Profile Image --> <div class="flex-shrink-0"> <a href="/" class="block"> <div class="overflow-hidden rounded-2xl ring-1 ring-gray-200 dark:ring-white/10"> <img class="w-32 h-32 md:w-40 md:h-40 object-cover" src="/me3_compressed.jpeg" alt="Niall Dalton"> </div> </a> </div> <!-- Content --> <div class="flex-1 space-y-4"> <!-- Name with animated gradient --> <div class="flex items-start justify-between gap-4"> <a href="/" class="inline-block"> <h1 class="text-4xl md:text-5xl font-bold tracking-tight"> <span class="gradient-text">Niall Dalton</span> </h1> </a> <button id="theme-toggle" type="button" class="p-2 rounded-lg text-gray-400 hover:text-white hover:bg-white/5 transition-colors" aria-label="Toggle theme"> <!-- Sun icon (shown in dark mode) --> <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path> </svg> <!-- Moon icon (shown in light mode) --> <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path> </svg> </button> <script type="module">const a=document.getElementById("theme-toggle"),t=document.documentElement;function d(){const e=localStorage.getItem("theme");return e==="light"||e==="dark"?e:"dark"}function n(e){e==="dark"?t.classList.add("dark"):t.classList.remove("dark"),localStorage.setItem("theme",e),window.dispatchEvent(new CustomEvent("themechange",{detail:e}))}n(d());a?.addEventListener("click",()=>{const e=t.classList.contains("dark")?"dark":"light";n(e==="dark"?"light":"dark")});</script> </div> <!-- Tagline --> <p class="text-lg text-gray-500 dark:text-gray-400 font-light max-w-md"> I write code and think about stuff. </p> <!-- Navigation Links --> <nav class="pt-2"> <ul class="flex flex-wrap items-center gap-1"> <li> <a href="https://github.com/ndalton12" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors"> <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"> <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path> </svg>
GitHub
</a> </li> <li> <a href="https://www.linkedin.com/in/niall-dalton/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors"> <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"> <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path> </svg>
LinkedIn
</a> </li> <li> <a href="/blog" class="inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white rounded-lg transition-colors"> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"></path> </svg>
Blog
</a> </li> </ul> </nav> </div> </div> </header> <article> <header class="mb-12"> <div class="glass-card rounded-2xl p-6 md:p-8"> <a href="/blog" class="text-sm text-gray-500 hover:text-gray-900 dark:hover:text-white transition-colors">
← Back
</a> <h1 class="mt-6 text-3xl md:text-4xl font-bold text-gray-900 dark:text-white tracking-tight"> Replicating &quot;The Illusion of Thinking&quot; Paper with Simple Arithmetic </h1> <time class="mt-3 block text-sm text-gray-500"> June 20, 2025 </time> </div> </header> <div class="glass-card rounded-2xl p-6 md:p-8"> <div class="prose max-w-none">  <p><strong>TLDR</strong>: “Reasoning” LLMs cannot actually apply algorithms to arbitrary lengths of data through chain of thought, even when they should have enough tokens to do so; rather, they likely rely on a set of heuristics which breakdown on high difficulty or long length problems. Moreover, these models even appear to “give up” past a certain difficulty and emit less thinking tokens than on easier problems of the same type! A recent paper from Apple showed this behavior; here, we replicate the results using simple n-digit multiplication.</p>
<h1 id="the-illusion-of-thinking">The Illusion of Thinking</h1>
<p>The recent paper <a href="https://machinelearning.apple.com/research/illusion-of-thinking">“The Illusion of Thinking: Understanding the Strengths and Limitations of Reasoning Models via the Lens of Problem Complexity”</a> show that “LRMs have limitations in exact computation: they fail to use explicit algorithms and reason inconsistently across puzzles” and call into question the ability of Reasoning LLMs, a.k.a Large Reasoning Models (LRMs), to actually think, particularly in the algorithmic sense. The paper also makes an interesting discovery: reasoning effort increases with problem complexity up to a certain point, then decreases, despite adequate budget.</p>
<p>I replicated some of the results of the paper on simple multiplication problems, by varying the digit length (n x n) of the problem and the allowed thinking budget for Claude 3.7 Sonnet. The experiment itself is dead simple but the results corroborate much of the paper’s findings. The results are shown in the figure below.</p>
<p><img alt="figure 1" loading="lazy" decoding="async" fetchpriority="auto" width="1512" height="880" src="/_astro/Figure_1.Hfot1FtX_Z2vNOBb.webp" ></p>
<p>From the results, we see a few things. First, we can see that accuracy falls off abruptly as digit length increases and that increasing the thinking budget tends to right-shift the curve — but the curve’s shape tends to stay more or less the same. In the bottom left graph we can see the “giving up” behavior where tokens used initially increases, but eventually steeply falls off past a certain point. This is more pronounced for the larger thinking budgets (although budget=4096 shows this the best). Since we can only increase the digit length by integer amounts, the curves aren’t perfectly smooth, and the highest thinking budget tested (16834) does show some deviation from this behavior, although the overall shape is still similar. Likewise, the response time graph in the top right closely mirrors the token usage, as to be expected (since more tokens used means more response time).</p>
<p>Something interesting to point out though is that none of the thinking budgets actually saturate the full thinking budget (outside of no thinking I suppose). For example, budget 4096 only expends up to around 3000 tokens before “giving up”. However, we can still see performance increases when upping the budget to 8192 <em>despite</em> the fact that the 8192 budget also does not exceed the previous 4096 budget! <strong>This implies that allowing the model additional thinking budget can result in better performance <em>even when it does not use the additional budget</em></strong>. Given that we don’t know the inner workings of how Claude limits its thinking budget, it’s hard to know how this mechanism works, but perhaps it is similar to <a href="https://arxiv.org/abs/2506.13752">this recent paper</a>.</p>
<p>Code for the project is <a href="https://github.com/ndalton12/llm-arithmetic">here</a>. If you have the budget, feel free to fork and test with different models — the code is using LiteLLM so it should be easy to try different ones (although you may need to change the thinking parameter).</p>
<h1 id="the-obviously-jagged-frontier">The Obviously Jagged Frontier</h1>
<p>How can models which are pushing better and better results in mathematics competitions fail to do simple arithmetic? The idea that LLMs are incredibly smart at some things but relatively stupid at other things is known as the jagged frontier — that is, LLMs push well above average humans on some tasks and well below at others, hence creating a jagged boundary of intelligence.</p>
<p>It’s not yet clear why LLMs behave this way, but we can speculate about their nature from the results of “The Illusion of Thinking” and the results shown here. From <a href="https://transformer-circuits.pub/2025/attribution-graphs/methods.html">“Circuit Tracing”</a> we can see that Claude likely does addition through “several intermediate heuristics rather than a coherent procedural program with a single confident output.” It’s reasonable to assume that other arithmetic operations behave similarly (such as multiplication). By relying on heuristics, the models build uncertainty with each step, and perhaps recognize or are overwhelmed when needing to apply these heuristics across increasingly more digits in arithmetic problems. Or perhaps the <em>width</em> of the network limits its ability to produce coherent heuristics across larger digit inputs when applying complex, heuristic driven attention patterns.</p>
<p>That said, I think there are many open questions in this area. If you want to discuss, feel free to contact me at <a href="mailto:niall.dalton12@gmail.com">niall.dalton12@gmail.com</a>.</p>  </div> </div> </article> <footer class="mt-12 text-center"> <a href="/blog" class="text-sm text-gray-500 hover:text-gray-900 dark:hover:text-white transition-colors">
← Back to posts
</a> </footer>  </div> </main>  <script type="module">const s=document.getElementById("grid-canvas"),e=s.getContext("2d");let i,n,y=0,d=document.documentElement.classList.contains("dark");window.addEventListener("themechange",t=>{d=t.detail==="dark"});let c=[];function b(){const t=Math.min(window.devicePixelRatio||1,2);i=window.innerWidth,n=s.offsetHeight,s.width=i*t,s.height=n*t,e.scale(t,t),w()}function w(){c=[];const t=Math.floor(i/35);for(let a=0;a<t;a++)c.push({x:Math.random()*i,y:Math.random()*n,size:Math.random()*1.5+.5,speed:Math.random()*.2+.05,alpha:Math.random()*.4+.1})}function u(t){return d?`rgba(99, 102, 241, ${t})`:`rgba(99, 102, 241, ${t*.7})`}function S(t){return d?`rgba(167, 139, 250, ${t})`:`rgba(99, 102, 241, ${t*.4})`}function v(){const a=i/2,g=50,h=Math.ceil(i/g)+10;e.lineWidth=1;for(let o=-h;o<=h;o++){const l=a+o*g*2,r=1-Math.abs(o)/h*.5;e.strokeStyle=u(.25*r),e.beginPath(),e.moveTo(a,0),e.lineTo(l,n),e.stroke()}const f=25,M=y*8%(n/f*3);for(let o=0;o<f;o++){const l=o/f,r=l*l*n+M*l;if(r>0&&r<n){const p=r/n,m=a+i*.8*p,x=p*.35;e.strokeStyle=u(x),e.beginPath(),e.moveTo(a-m,r),e.lineTo(a+m,r),e.stroke()}}}function z(){for(const t of c)if(d){const a=e.createRadialGradient(t.x,t.y,0,t.x,t.y,t.size*4);a.addColorStop(0,S(t.alpha)),a.addColorStop(1,"transparent"),e.fillStyle=a,e.beginPath(),e.arc(t.x,t.y,t.size*4,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(255, 255, 255, ${t.alpha*.8})`,e.beginPath(),e.arc(t.x,t.y,t.size*.5,0,Math.PI*2),e.fill()}else{const a=e.createRadialGradient(t.x,t.y,0,t.x,t.y,t.size*3);a.addColorStop(0,`rgba(129, 140, 248, ${t.alpha*.6})`),a.addColorStop(.5,`rgba(167, 139, 250, ${t.alpha*.3})`),a.addColorStop(1,"transparent"),e.fillStyle=a,e.beginPath(),e.arc(t.x,t.y,t.size*3,0,Math.PI*2),e.fill(),e.fillStyle=`rgba(139, 92, 246, ${t.alpha*.7})`,e.beginPath(),e.arc(t.x,t.y,t.size*.6,0,Math.PI*2),e.fill()}}function C(){for(const t of c)t.y-=t.speed,t.y<-10&&(t.y=n+10,t.x=Math.random()*i)}function P(){y+=.016,e.clearRect(0,0,i,n),v(),C(),z(),requestAnimationFrame(P)}window.addEventListener("resize",b);b();P();</script> </body> </html> <!-- Wikipedia preview hover card --> <div id="wiki-preview" class="fixed z-50 hidden w-96 rounded-md border bg-gray-100 bg-popover p-4 text-popover-foreground shadow-md dark:bg-gray-900"> <img id="wiki-preview-img" class="mb-3 hidden h-32 w-full rounded-md object-cover" alt=""> <h4 id="wiki-preview-title" class="font-semibold"></h4> <p id="wiki-preview-extract" class="mt-1 text-sm text-muted-foreground"></p> <a id="wiki-preview-link" href="#" target="_blank" rel="noopener noreferrer" class="mt-3 inline-flex items-center gap-1 text-xs text-primary hover:underline">
Read on Wikipedia →
</a> </div> <script type="module">const r=document.getElementById("wiki-preview"),s=document.getElementById("wiki-preview-img"),u=document.getElementById("wiki-preview-title"),o=document.getElementById("wiki-preview-extract"),m=document.getElementById("wiki-preview-link"),l={};let d,a=null;async function v(t){if(l[t])return l[t];const i=`https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(t.replace(/ /g,"_"))}`,e=await fetch(i);if(!e.ok)throw new Error("Failed to fetch");const n=await e.json();return l[t]=n,n}function w(t,i){if(!r||!u||!o||!m||!s)return;const e=parseInt(t.getAttribute("data-wiki-preview-length")||"")||400;u.textContent=i.title,o.textContent=i.extract?.length>e?i.extract.slice(0,e)+"...":i.extract||"",m.href=t.getAttribute("href")||"#",i.thumbnail?.source?(s.src=i.thumbnail.source,s.classList.remove("hidden")):s.classList.add("hidden");const n=t.getBoundingClientRect();let c=n.left+n.width/2-192,p=n.top-8;c=Math.max(8,Math.min(c,window.innerWidth-400)),r.style.left=`${c}px`,r.style.bottom=`${window.innerHeight-p}px`,r.style.top="auto",r.classList.remove("hidden")}function h(){d=setTimeout(()=>{r?.classList.add("hidden"),a=null},100)}document.querySelectorAll("[data-wiki-term]").forEach(t=>{t.addEventListener("mouseenter",async i=>{clearTimeout(d);const e=i.currentTarget;a=e;const n=e.getAttribute("data-wiki-term");if(!(!n||!o)){o.textContent="Loading...",w(e,{title:n,extract:"Loading..."});try{const c=await v(n);a===e&&w(e,c)}catch{a===e&&o&&(o.textContent="Could not load preview")}}}),t.addEventListener("mouseleave",h)});r?.addEventListener("mouseenter",()=>clearTimeout(d));r?.addEventListener("mouseleave",h);</script>